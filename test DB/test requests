-- Вывод предметов для препода
SELECT subjects.name
FROM teacher_subjects
JOIN subjects ON teacher_subjects.subject_id = subjects.id
WHERE teacher_subjects.teacher_id = 1;

--Вывод предметов для группы
SELECT subjects.name
FROM groups
JOIN subjects ON groups.subject_id = subjects.id
WHERE groups.id = 2;

-- Список всех занятий (Frame 4)
SELECT *
FROM subjects;

-- Выбор предмета по нажатию (Frame 5)
SELECT name AS subject_name
FROM subjects
WHERE id = 1;

-- Проведённые занятия (Frame 6)
SELECT lessons.id           AS '№',
       subjects.name        AS 'Предмет',
       dates.lesson_date    AS 'Дата',
       lessons."group" AS 'Номер группы'
FROM lessons
         JOIN
     subjects ON lessons.subject_id = subjects.id
         JOIN
     dates ON lessons.date_id = dates.id;

-- Выбор предмета по нажатию (Frame 5)
SELECT name AS subject_name
FROM subjects
WHERE id = 1;

-- Данные этого предмета по отдельности (Дата:Frame 5)
SELECT dates.lesson_date as Дата
FROM lessons
         JOIN
     dates ON lessons.date_id = dates.id
WHERE lessons.subject_id = 1;

-- Данные этого предмета по отдельности (Время:Frame 5)
SELECT lessons.time as Время

FROM lessons
         JOIN
     dates ON lessons.date_id = dates.id
WHERE lessons.subject_id = 1;

-- Данные этого предмета по отдельности (Группа:Frame 5)
SELECT lessons."group" as Группа
FROM lessons
         JOIN
     dates ON lessons.date_id = dates.id
WHERE lessons.subject_id = 1;

-- Посещаемость (Frame 2)
--Предмет
SELECT subjects.name      AS Предмет,
       dates.lesson_date  as Дата,
       lessons.time as Время
FROM lessons
         JOIN
     subjects ON lessons.subject_id = subjects.id
         JOIN
     dates ON lessons.date_id = dates.id
WHERE lessons.subject_id = 1;

-- Вывод таблицы с посещениями
SELECT attendance.id        AS №,
       users.username       AS ФИО,
       lessons."group" as 'Номер группы',
       attendance.status    as Статус
FROM attendance
         JOIN
     users ON attendance.student_id = users.id
         JOIN
     lessons ON attendance.lesson_id = lessons.id
WHERE attendance.lesson_id = 1;

-- Запрос для вывода информации о занятиях для преподавателя
SELECT
    lessons.id AS id,
    lessons.lesson_number as num,
    GROUP_CONCAT("group") as groups,
    lessons.time,
    subjects.name AS title,
    dates.lesson_date as date
FROM lessons
JOIN subjects ON lessons.subject_id = subjects.id
JOIN dates ON lessons.date_id = dates.id
JOIN teacher_subjects ON lessons.subject_id = teacher_subjects.subject_id
WHERE teacher_subjects.teacher_id = 1;

-- Запрос для вывода информации о занятиях по id предмета
SELECT
    lessons.id,
    lessons.lesson_number AS num,
    GROUP_CONCAT(lessons."group") AS groups,
    lessons.time,
    subjects.name AS title,
    dates.lesson_date AS date
FROM lessons
JOIN subjects ON lessons.subject_id = subjects.id
JOIN dates ON lessons.date_id = dates.id
WHERE lessons.id = 1;

-- Запрос для вывода информации о занятиях после определённой даты
SELECT
    lessons.id,
    lessons.lesson_number AS num,
    GROUP_CONCAT(lessons."group") AS groups,
    lessons.time,
    subjects.name AS title,
    dates.lesson_date AS date
FROM lessons
JOIN subjects ON lessons.subject_id = subjects.id
JOIN dates ON lessons.date_id = dates.id
WHERE dates.lesson_date < CURRENT_DATE
GROUP BY  dates.lesson_date;
